<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <title>Stubble</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

		<!-- Externals -->

		<link type="text/css" href="../cdn/css/projectPage.css"rel="stylesheet">
		<link type="text/css" href="http://www.asbjornenge.com/cdn/fonts/museo-sans.css"rel="stylesheet">
		<link type="text/css" href="http://www.asbjornenge.com/cdn/google-code-prettify/prettify.css"rel="stylesheet">
		<link type="text/css" href="http://fonts.googleapis.com/css?family=Fanwood+Text:400,400italic|Reenie+Beanie|Lobster+Two:400,700italic" rel="stylesheet">
        <script type="text/javascript" src="http://www.asbjornenge.com/cdn/jquery.min.js"></script>
		<script type="text/javascript" src="http://www.asbjornenge.com/cdn/google-code-prettify/prettify.js"></script>
		<script type="text/javascript" src="http://www.asbjornenge.com/cdn/ga.js"></script>

		<!-- Page specific -->
		
        <link type="text/css" href="css/stubble.css" rel="stylesheet">
		<script type="text/javascript" src="js/stubble.js"></script>
    </head>

    <body>
		<a href="https://github.com/asbjornenge/stubble">
			<img style="position: absolute; top: 0; right: 0; border: 0;" 
			     src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" 
			     alt="Fork me on GitHub">
		</a>

        <div id="wrapper">
			<div id="face"></div>

			<div class="content">
				<h1>Stubble</h1>

<p><em>Tiny hairy templates, with potential.</em></p>

<p>Stubble is a <strong><em>552 B</em></strong> (gzipped) template system. It has a few areas of focus:</p>

<ul>
<li>Staying tiny</li>
<li>Keep the markup clean &amp; separate from logic</li>
<li>Easily expandable (using filters)</li>
</ul>

<p>It is far from a slick <a href="http://handlebarsjs.com/">handlebar mustache</a>, but you can easily grow it however you want.</p>

<h2>Installation</h2>

<pre><code>bower install stubble
</code></pre>

<h2>Usage</h2>

<pre><code>&lt;script src=&quot;bower_components/stubble/stubble.min.js&quot;&gt;&lt;/script&gt;
</code></pre>

<h2>Basics</h2>

<h3>Defining templates</h3>

<p>Put the data stub&#39;s somewhere in your dom.</p>

<pre><code>&lt;div data-stub=&quot;login&quot;&gt;
    &lt;span&gt;Welcome {{user}}!&lt;/span&gt;
&lt;/div&gt;
</code></pre>

<h3>Rendering templates</h3>

<p>Calling <strong>stub.load()</strong> will collect all your stubs and remove them from the dom.</p>

<pre><code>stub.load()
var login = stub(&#39;login&#39;, {&#39;user&#39; : &#39;Bob&#39;})
// =&gt;
// &lt;div&gt;
//   &lt;span&gt;Welcome Bob!&lt;/span&gt;
// &lt;/div&gt;
</code></pre>

<h2>Filters</h2>

<p>Filters are a way of expanding stubbles capabilities in a declarative manner. By adding a filter function to <strong>stub.filters</strong> and tagging a property with <strong>@filtername</strong>. Stubble will upon initialization pass a <a href="#filter-data">special object</a> through this filter function.</p>

<pre><code>&lt;div data-stub=&quot;inputs&quot;&gt;
    &lt;input type=&quot;number&quot; value=&quot;{{amount@updateSum}}&quot; /&gt;
    &lt;div class=&quot;sum&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>The filter might look like this (if you had jQuery up your sleve):</p>

<pre><code>stub.filters.updateSum = function(data) {
    $(data.node).on(&#39;change&#39;, function() {
        $(this).next().text(150 * this.value);
    })
}
</code></pre>

<h3><a name="filter-data">Filter data</a></h3>

<p>The data object that is passed through the filters consist of the following.</p>

<pre><code>{
    node : &lt;dom&gt;,    // the stub node
    obj  : {},       // the data object passed to stub
    prop : &lt;string&gt;, // the matched obj property extracted
    expr : &lt;string&gt;, // the matched expression
    type : &lt;string&gt;, // &#39;attribute&#39; or &#39;text&#39;
    attribute : &lt;string&gt;, // only if type is attribute - attribute name
    child     : &lt;string&gt;, // only if type is text - text node
    extracted : ?         // extracted value
}
</code></pre>

<h3>Filter nesting</h3>

<pre><code>&lt;div data-stub=&quot;inputs&quot;&gt;
    &lt;input type=&quot;number&quot; value=&quot;{{amount@removeCommas@updateSum@updateEmailText@databind}}&quot; /&gt;
    &lt;div class=&quot;sum&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre>

<h3>Filter order</h3>

<p>It is important to note that filters are processed in the order specified in the template.</p>

<h3>Extract filter</h3>

<p><em>stub.filters.extract</em> is special. It is always the <strong>first</strong> to run and is responsible for extracting the correct value form the passed object as specified by the expression.</p>

<h3>Replace</h3>

<p><em>stub.filters.replace</em> is special also. It is always the <strong>last</strong> filter to run. It replaces the content of <em>data.expr</em> with that of <em>data.extracted</em>.</p>

<h3>Default</h3>

<p>There is also a <em>stub.filters.default</em> property where you can specify filters to run on <strong>all</strong> stubs.</p>

<p>Stubble comes with two builtin filters; <em>_null</em> and <em>_undef</em>. These are by default the default. If any extracted value results to null or undefined these two filters will replace <em>data.extracted</em> with an empty string.</p>

<h3>Filter examples</h3>

<h4>Formatting</h4>

<p>Markup</p>

<pre><code>&lt;div data-stub=&quot;inputs&quot;&gt;
    &lt;input type=&quot;date&quot; value=&quot;{{date@formatDate}}&quot; /&gt;
&lt;/div&gt;
</code></pre>

<p>Filter</p>

<pre><code>stub.filters.formatDate = function(data) {
    data.extracted = format(data.extracted);
}
</code></pre>

<h4>Required fields</h4>

<p>Markup</p>

<pre><code>&lt;div data-stub=&quot;inputs&quot;&gt;
    &lt;input type=&quot;number&quot; value=&quot;{{prop1@required}}&quot; /&gt;
    &lt;input type=&quot;text&quot;   value=&quot;{{prop2@required}}&quot; /&gt;
    &lt;input type=&quot;date&quot;   value=&quot;{{prop3@required}}&quot; /&gt;
&lt;/div&gt;
</code></pre>

<p>Filter</p>

<pre><code>stub.filters.required = function(data) {
    $(data.node).on(&#39;validate&#39;, function() {
        if (this.value == &quot;&quot;) $(this).addClass(&#39;invalid&#39;);
    })
}
</code></pre>

<h4>Databind</h4>

<p>Markup</p>

<pre><code>&lt;div data-stub=&quot;inputs&quot;&gt;
    &lt;input type=&quot;number&quot; value=&quot;{{prop1@databind}}&quot; /&gt;
&lt;/div&gt;
</code></pre>

<p>Filter</p>

<pre><code>stub.filters.databind = function(data) {
    $(data.node).on(&#39;change&#39;, function() {
        data.obj[data.prop] = this.value;
    })
}
</code></pre>

<p>If you make any useful generic filters, please drop me a link <a href="http://twitter.com/asbjornenge">@asbjornenge</a>.</p>

<p>enojy.</p>

			</div>

        </div>
    </body>
</html>
